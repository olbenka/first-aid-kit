<ISSPECS>
    <DESCRIPTION>
        <TITLE>Телеграм-бот аптечка</TITLE>
        <SUBJ>https://t.me/firstAidKitInfoBot</SUBJ>
    </DESCRIPTION>
    <DATA>
        <!-- Medication -->
        <ENTITY ent_id="medication">
            <PROPERTY>id (PK): уникальный идентификатор, генерируется автоматически.</PROPERTY>
            <PROPERTY>name: наименование медикамента (не должно быть пустым).</PROPERTY>
            <PROPERTY>quantity: количество медикамента (> 0, при значении 0 медикамент удаляется).</PROPERTY>
            <PROPERTY>expiryDate: дата окончания срока годности (должна быть в будущем, вводится в формате ММ.ГГГГ, дата должна быть корректной).</PROPERTY>
            <PROPERTY>briefInfo: краткая информация о медикаменте (не может быть пустым).</PROPERTY>
            <PROPERTY>photo (FK): id фотография медикамента (ссылка на AppPhoto).</PROPERTY>
            <PROPERTY>document (FK): id документ медикаментa (ссылка на AppDocument).</PROPERTY>
            <PROPERTY>user (FK): id пользователь, которому принадлежит медикамент (ссылка на AppUser).</PROPERTY>
        </ENTITY>
        <!-- BinaryContent -->
        <ENTITY ent_id="binary_content">
            <PROPERTY>id (PK): Уникальный идентификатор, генерируется автоматически.</PROPERTY>
            <PROPERTY>fileAsArrayOfBytes: Массив байтов. (не может быть пустым).</PROPERTY>
        </ENTITY>
        <!-- AppUser -->
        <ENTITY ent_id="app_user">
            <PROPERTY>id (PK): Уникальный идентификатор (генерируется автоматически).</PROPERTY>
            <PROPERTY>telegramUserId: Идентификатор пользователя в Telegram (уникален, генерируется автоматически).</PROPERTY>
            <PROPERTY>firstLoginDate: Дата первого входа в приложение (генерируется автоматически).</PROPERTY>
            <PROPERTY>firstName: Имя пользователя (не может быть пустым).</PROPERTY>
            <PROPERTY>userName: Имя пользователя в Telegram (уникально).</PROPERTY>
            <PROPERTY>email: Электронная почта пользователя (уникальна, должна соответствовать формату электронной почты).</PROPERTY>
            <PROPERTY>isActive: Статус активности пользователя (true/false).</PROPERTY>
            <PROPERTY>userState: Состояние пользователя. Принимает различные значения во время ввода данных.</PROPERTY>
        </ENTITY>
        <!-- AppPhoto -->
        <ENTITY ent_id="app_photo">
            <PROPERTY>id (PK): Уникальный идентификатор (генерируется автоматически).</PROPERTY>
            <PROPERTY>telegramFileId: Идентификатор файла в Telegram (уникален)</PROPERTY>
            <PROPERTY>binaryContent_id (FK): Внешний ключ, связывает с таблицей BinaryContent.</PROPERTY>
            <PROPERTY>fileSize: Размер файла фотографии (неотрицательно).</PROPERTY>
        </ENTITY>
        <!-- AppDocument -->
        <ENTITY ent_id="app_document">
            <PROPERTY>id (PK): Уникальный идентификатор, генерируется автоматически.</PROPERTY>
            <PROPERTY>telegramFileId: Идентификатор файла в Telegram (уникален).</PROPERTY>
            <PROPERTY>docName: Наименование документа (не может быть пустым).</PROPERTY>
            <PROPERTY>binaryContent_id (FK): Внешний ключ, связывает с таблицей BinaryContent.</PROPERTY>
            <PROPERTY>mimeType: Тип содержимого документа.</PROPERTY>
            <PROPERTY>fileSize: Размер файла документа (неотрицательно).</PROPERTY>
        </ENTITY>
    </DATA>
    <ROLES>
        <!-- Пользовательская роль - Пользователь -->
        <ROLE>
            <TITLE>Пользователь</TITLE>
            <RESPONSIBILITY>Ответственность: ввод и учет медикаментов, мониторинг сроков годности, корректность вводимой почты.</RESPONSIBILITY>
            <TOTALUSERS>Количество пользователей: неограниченно.</TOTALUSERS>
        </ROLE>
        <!-- Пользовательская роль - Администратор -->
        <ROLE>
            <TITLE>Администратор</TITLE>
            <RESPONSIBILITY>Ответственность: управление пользователями, доступ к данным.</RESPONSIBILITY>
            <TOTALUSERS>Количество пользователей: 1.</TOTALUSERS>
        </ROLE>
    </ROLES>
    <TECHSPEC>
        <TYPE>Java 11</TYPE>
        <DEVTOOLS>
            <DEV>SpringBoot</DEV>
        </DEVTOOLS>
        <DBMS>
<TITLE>PostgreSQL</TITLE>
            <VERSION>42.2.18</VERSION>
 
        </DBMS>
    </TECHSPEC>
    <!-- Relationships -->
    <RELATIONSHIPS>
        <!-- Relationship between Medication and AppPhoto -->
        <RELATIONSHIP ent_ids="medication app_photo">
            <PROPERTY>ONE TO ONE</PROPERTY>
        </RELATIONSHIP>
        <!-- Relationship between Medication and AppDocument -->
        <RELATIONSHIP ent_ids="medication app_document">
            <PROPERTY>ONE TO ONE</PROPERTY>
        </RELATIONSHIP>
        <!-- Relationship between Medication and AppUser -->
        <RELATIONSHIP ent_ids="medication app_user">
            <PROPERTY>MANY TO ONE</PROPERTY>
        </RELATIONSHIP>
        <!-- Relationship between AppPhoto and BinaryContent -->
        <RELATIONSHIP ent_ids="app_photo binary_content">
            <PROPERTY>ONE TO ONE</PROPERTY>
        </RELATIONSHIP>
        <!-- Relationship between AppDocument and BinaryContent -->
        <RELATIONSHIP ent_ids="app_document binary_content">
            <PROPERTY>ONE TO ONE</PROPERTY>
        </RELATIONSHIP>
    </RELATIONSHIPS>
</ISSPECS>